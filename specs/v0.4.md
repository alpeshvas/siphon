# Siphon Spec v0.4

Added collect for returning all matches.

## Features
- Simple JSONPath extraction: `$.data.id`
- Array iteration with `[*]`
- Filtering with `where` (returns first match by default)
- Field projection/renaming with `select`
- Collect all matches with `collect: true`

## Syntax

### Simple extraction
```yaml
field_name: "$.path.to.field"
```

### Extended extraction
```yaml
field_name:
  path: "$.path.to.array[*]"
  where: {field: "value"}      # optional: filter condition
  select: {new: "old.path"}    # optional: project/rename fields
  collect: true                # optional: return all matches (default: false)
```

## Example

```yaml
version: "0.4"

request:
  path: "/products"

extract:
  id: "$.data.id"
  
  first_active:
    path: "$.data.items[*]"
    where: {status: "active"}
    select: {item_id: "id", item_name: "name"}
  
  all_active:
    path: "$.data.items[*]"
    where: {status: "active"}
    select: {item_id: "id", item_name: "name"}
    collect: true
```

## Input

```json
{
  "data": {
    "id": "prod_123",
    "items": [
      {"id": 1, "status": "active", "name": "Widget", "pricing": {"amount": 100}},
      {"id": 2, "status": "inactive", "name": "Gadget", "pricing": {"amount": 200}},
      {"id": 3, "status": "active", "name": "Thing", "pricing": {"amount": 50}}
    ]
  }
}
```

## Output

```json
{
  "id": "prod_123",
  "first_active": {
    "item_id": 1,
    "item_name": "Widget"
  },
  "all_active": [
    {"item_id": 1, "item_name": "Widget"},
    {"item_id": 3, "item_name": "Thing"}
  ]
}
```

## Changes from v0.3
- Added `collect: true` to return all matching items as an array
- Removed `hoist` (unnecessary complexity)
